#include <iostream>
#include <cmath>
using namespace std;
int main() {
    int N, M;
    cin >> N >> M;
    int x, y;
    cin >> x >> y;
    int num;
    cin >> num;
    char Q[num];
    for (int i = 0; i < num; i++)
    {
        cin >> Q[i];
    }
    
    for (int i = 0; i < num; i++)
    {
        if (Q[i] == 'W')
        {
            x -= 1;
            if (x < 0)
            {
                x = 0;
            }else if (x > N - 1) 
            {
                x = N - 1;
            }
            if (x == 0 || x == N - 1)
            {
                for (int n = 0; n < N; n++)
                {
                    for (int m = 0; m < M; m++)
                    {
                        if (n == x && m == y)
                        {
                            cout << "@";
                        }else{
                            cout  << ".";
                        }
                    }
                    cout << endl;                
                } 
                continue;
            }
            
            for (int n = 0; n < N; n++)
            {
                for (int m = 0; m < M; m++)
                {
                    if (n == x && m == y)
                    {
                        cout << "@";
                    }else{
                        cout  << ".";
                    }
                }
                cout << endl;                
            }
            
            
        }else if (Q[i] == 'A')
        {            
            y -= 1;
            if (y < 0)
            {
                y = 0;
            }else if (y > M - 1) 
            {
                y = M - 1;
            }
            if (y == 0 || y == M - 1)
            {
                for (int n = 0; n < N; n++)
                {
                    for (int m = 0; m < M; m++)
                    {
                        if (n == x && m == y)
                        {
                            cout << "@";
                        }else{
                            cout  << ".";
                        }
                    }
                    cout << endl;                
                } 
                continue;
            }            
            
            for (int n = 0; n < N; n++)
            {
                for (int m = 0; m < M; m++)
                {
                    if (n == x && m == y)
                    {
                        cout << "@";
                    }else{
                        cout  << ".";
                    }
                }
                cout << endl;                
            }
                        
        }else if (Q[i] == 'S')
        {   
            x += 1;
            if (x < 0)
            {
                x = 0;
            }else if (x > N - 1) 
            {
                x = N - 1;
            }
            if (x == 0 || x == N - 1)
            {
                for (int n = 0; n < N; n++)
                {
                    for (int m = 0; m < M; m++)
                    {
                        if (n == x && m == y)
                        {
                            cout << "@";
                        }else{
                            cout  << ".";
                        }
                    }
                    cout << endl;                
                } 
                continue;
            }            
            for (int n = 0; n < N; n++)
            {
                for (int m = 0; m < M; m++)
                {
                    if (n == x && m == y)
                    {
                        cout << "@";
                    }else{
                        cout  << ".";
                    }
                }
                cout << endl;                
            }
                        
        }else if (Q[i] == 'D')
        {
            y += 1;
            if (y < 0){
                y = 0;
            }else if (y > M - 1){ 
                y = M - 1;
            }
            if (y == 0 || y == M - 1)
            {
                for (int n = 0; n < N; n++)
                {
                    for (int m = 0; m < M; m++)
                    {
                        if (n == x && m == y)
                        {
                            cout << "@";
                        }else{
                            cout  << ".";
                        }
                    }
                    cout << endl;                
                } 
                continue;
            }            
            for (int n = 0; n < N; n++)
            {
                for (int m = 0; m < M; m++)
                {
                    if (n == x && m == y)
                    {
                        cout << "@";
                    }else{
                        cout  << ".";
                    }
                }
                cout << endl;                
            }
        }
    }
  
    return 0;
}
